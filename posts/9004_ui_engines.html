<!DOCTYPE html>
<html lang='en'>
<head>
<meta charset='utf-8' />
<meta name='viewport' content='width=device-width, initial-scale=1' />
<title>UI Engines: Interfaces of the Future</title>
<meta name='description' content='A breif backstory about me' />
<meta itemprop='name' content='UI Engines: Interfaces of the Future'>
<meta itemprop='description' content='A breif backstory about me'>
<meta itemprop='image' content='godrays_04.png'>
<meta property='og:title' content='UI Engines: Interfaces of the Future' />
<meta property='og:description' content='A breif backstory about me' />
<meta property='og:type' content='website' />
<meta property='og:url' content='null' />
<meta property='og:site_name' content='Nick Aversano' />
<meta property='og:locale' content='en_us' />
<meta name='twitter:card' content='summary' />
<meta name='twitter:title' content='UI Engines: Interfaces of the Future' />
<meta name='twitter:description' content='A breif backstory about me' />
<meta name='twitter:image' content='godrays_04.png' />
<meta name='twitter:site' content='@nickaversano' />
<meta name='theme-color' content='#000000' />
<meta name='msapplication-TileColor' content='#000000' />
<link rel='shortcut icon' href='/favicon.png' sizes='32x32' />
<style type='text/css'>*{margin:0}*,*:before,*:after{box-sizing:border-box}html,body{height:100%}img,video{display:block;max-width:100%;height:auto;margin:0 auto}img{width:100%}input,button,textarea,select{font:inherit}h1,h2,h3,h4,h5,h6,p{padding:0;overflow-wrap:break-word}svg{fill:currentColor}:root{--black:#000;--white:#fff;--gray:#bbb;--gray-light:rgba(255,255,255,0.25);--white-light:rgba(255,255,255,0.1);--black-light:rgba(0,0,0,0.1);--bg:var(--black);--color:var(--white);--highlight:var(--white-light);--accent:#afaffc}.invert{--bg:var(--white);--color:var(--black);--highlight:var(--black-light);--gray:#555;--gray-light:rgba(0,0,0,0.25);background:var(--bg);color:var(--color)}html{font-size:16px;font-weight:400;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;line-height:1.5;-webkit-font-smoothing:antialiased}body{background:var(--bg);color:var(--color);min-width:320px}.load *{transition:opacity 200ms,background 200ms,color 200ms}a{color:inherit;text-decoration:none;cursor:pointer}a:not(.no-hover):hover{opacity:0.5}p{margin:1rem 0}hr{margin:4rem 0;border:0;display:flex;justify-content:center}hr:after{content:'';max-width:100px;width:100%;border:1px solid var(--gray-light)}.link{border-bottom:4px solid var(--accent)}.message{border-left:4px solid var(--accent);padding:1rem 2rem;margin:2rem 0;font-weight:500}.c-gray{color:var(--gray)}.bg-light{background:var(--highlight)}.font-normal{font-weight:400}.font-bold{font-weight:700}.font-16{font-size:1rem}.font-24{font-size:1.5rem}.font-32{font-size:2rem}.inline-block{display:inline-block}.inline-flex{display:inline-flex}.flex-x{display:flex;flex-direction:row}.flex-y{display:flex;flex-direction:column}.flex-1{flex:1}.align-right{margin-left:auto}.flex-row.center-y{align-items:center}.flex-col.center-y{justify-content:center}.flex-row.center-x{justify-content:center}.flex-col.center-x{align-items:center}.flex-x.center-y{align-items:center}.flex-y.center-y{justify-content:center}.flex-x.center-x{justify-content:center}.flex-y.center-x{align-items:center}.center{justify-content:center;align-items:center}.grid{display:grid;grid-template-columns:repeat(2,1fr);grid-gap:1rem;grid-auto-rows:1fr}.size-16{width:1rem;height:1rem}.size-20{width:1.25rem;height:1.25rem}.size-24{width:1.5rem;height:1.5rem}.size-32{width:2rem;height:2rem}.padx-8{padding-left:0.5rem;padding-right:0.5rem}.padx-16{padding-left:1rem;padding-right:1rem}.padx-32{padding-left:2rem;padding-right:2rem}.padx-64{padding-left:4rem;padding-right:4rem}.pady-8{padding-top:0.5rem;padding-bottom:0.5rem}.pady-16{padding-top:1rem;padding-bottom:1rem}.pady-32{padding-top:2rem;padding-bottom:2rem}.pady-64{padding-top:4rem;padding-bottom:4rem}.pad-8{padding:0.5rem}.pad-16{padding:1rem}.pad-32{padding:2rem}.pad-64{padding:4rem}.mary-32{margin-top:2rem;margin-bottom:2rem}.marb-32{margin-bottom:2rem}.w-full{width:100%}.w-1280{max-width:80rem;width:100%}.w-800{max-width:50rem;width:100%}.h-full{height:100%}.h-64{height:4rem}.h-128{height:8rem}.h-144{height:9rem}.h-160{height:10rem}.h-200{height:12.5rem}.h-320{height:20rem}.csx-8>*:not(:last-child){margin-right:0.5rem}.csx-16>*:not(:last-child){margin-right:1rem}.csx-32>*:not(:last-child){margin-right:2rem}.csx-64>*:not(:last-child){margin-right:4rem}.csy-8>*:not(:last-child){margin-bottom:0.5rem}.csy-16>*:not(:last-child){margin-bottom:1rem}.csy-32>*:not(:last-child){margin-bottom:2rem}.csy-64>*:not(:last-child){margin-bottom:4rem}.bg{position:absolute;z-index:-1;opacity:0.25}a:hover .bg{opacity:0.75}.hero{aspect-ratio:2 / 1;max-height:55vh}.cover{object-fit:cover;width:100%;height:100%}.content{max-width:48rem;margin:0 auto;width:100%}.content :is(h2,h3,h4,h5,h6){margin:2.5rem 0 0.5rem 0}.content .link{word-break:break-all}.video{position:relative;padding-bottom:56.25%;height:0}.video iframe{position:absolute;top:0;left:0;width:100%;height:100%}.round{border-radius:2px}.round-2{border-radius:4px}.crop{overflow:hidden}.quote{border-radius:4px;background:#272822;color:#F8F8F2;font-weight:500;white-space:pre-line;padding:2rem;margin:2rem 0}.code,.inline_code{border-radius:4px;background:#272822;color:#F8F8F2;font-weight:500;font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:0.9em}.inline_code{white-space:nowrap;display:inline;padding:0.1rem 0.4rem}.code{overflow-x:auto;padding:2rem;margin:2rem 0}.no_select{user-select:none}.tok-Keyword,.tok-Macro{color:#F92672}.tok-Type{color:#66D9EF}.tok-Comment{color:#75715E}.tok-Number,.tok-Literal{color:#AE81FF}.tok-String{color:#E6DB74 }.tok-Function{color:#A6E22E}@media screen and (max-width:640px){html{font-size:16px}}@media screen and (min-width:961px){html{font-size:18px}}@media screen and (min-width:1441px){html{font-size:20px}.xl\:h-480{height:30rem}}@media screen and (max-width:960px){.md\:flex-x{display:flex;flex-direction:row}.md\:flex-y{display:flex;flex-direction:column}.md\:csy-8>*:not(:last-child){margin-bottom:0.5rem}.md\:pad-32{padding:2rem}}@media screen and (max-width:640px){.sm\:flex-x{display:flex;flex-direction:row}.sm\:flex-y{display:flex;flex-direction:column}.sm\:csy-8>*:not(:last-child){margin-bottom:0.5rem}.sm\:pad-32{padding:2rem}.sm\:pad-16{padding:1rem}.sm\:padx-32{padding-left:2rem;padding-right:2rem}.sm\:h-160{height:11rem}.sm\:h-240{height:15rem}.grid{grid-template-columns:repeat(1,1fr)}}@media screen and (max-width:480px){.xs\:flex-y{display:flex;flex-direction:column}}</style>
<link rel='alternate' type='application/rss+xml' title='Nick Aversano' href='https://nickav.co/feed.xml' />
</head>
<body class='UI Engines: Interfaces of the Future'>
<div class='content flex-x pad-64  xs:flex-y sm:csy-8 sm:pad-32'>
<div class='csx-16 flex-1 flex-x center-y'>
<span class='font-24 font-bold'><a href='/'>Nick Aversano</a></span>
</div>
<div class='csx-16 flex-x'>
<a title='Twitch' href='https://twitch.tv/naversano' target='_blank' class='inline-flex center pad-8'><div class='inline-block size-20'><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Twitch</title><path d="M11.571 4.714h1.715v5.143H11.57zm4.715 0H18v5.143h-1.714zM6 0L1.714 4.286v15.428h5.143V24l4.286-4.286h3.428L22.286 12V0zm14.571 11.143l-3.428 3.428h-3.429l-3 3v-3H6.857V1.714h13.714Z"/></svg></div></a>
<a title='Twitter' href='https://www.twitter.com/nickaversano' target='_blank' class='inline-flex center pad-8'><div class='inline-block size-20'><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Twitter</title><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/></svg></div></a>
<a title='Github' href='https://www.github.com/nickav' target='_blank' class='inline-flex center pad-8'><div class='inline-block size-20'><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></div></a>
</div>
</div>
<div class='hero w-full bg-light'>
<img src='/r/godrays_04.png' alt='' class='cover'/>
</div>
<div class='content padx-64 sm:padx-32 h-64 flex-x center-y csx-32' style='margin-bottom: -2rem'><a class='font-bold pady-16' href='/posts/0003_wasm_from_scratch'>‚Üê Prev</a></div>
<div id='content' class='content pad-64 sm:pad-32'>
<div class='marb-32'>
<div class='c-gray' style='font-size:0.8rem'>6 min read</div>
<h1>UI Engines: Interfaces of the Future</h1>
<div class='c-gray'>12 December 2022</div>
<div>By <a class='font-bold link' href='/'>Nick Aversano</a></div>
</div>

Software today keeps getting slower and slower. It's gotten so bad that users have come to expect things to be slow and buggy rather than working fast. Have you ever used a smart TV recently? Truly an adversarial experience. And it's no coincidence that software keeps getting built with increasingly more dependencies.
<p></p>It's not uncommon for projects to have tens of thousands of dependencies of various JavaScript packages. I think the answer is yes. Increasingly people have stopped caring about the users experience and have decided that they want them to pay with their time by using these slow products.
<p></p>So, the first thing is, you know, the web was originally built to display newspapers on online with HTML and CSS.Now, while they have lots of problems on their own, they do that job well enough.But what they don't do, and what the web browser wasn't really designed for is to build entire applications.
<p></p>So, nowadays people use these "modern frontend frameworks" to create "single page applications." Now, this actually is sort of interesting because it's starting to resemble desktop software, more and more, but the problem with building stuff as the browser, as your first layer of abstraction is you accept a lot of cruft.
<p></p>For example, Chrome is slow and bloated because of all of the various features that has to support and your foundations are shaky building a UI in the Dom with HTML and CSS and JavaScript.There's just a limit on how fast that can be.Now, modern front end frameworks like react have sort of brought some of this immediate mode UI thinking to the web, which I would argue has made a good difference on thinking about applications, but a net bad slow outcome on most common cases, I know a window on Windows, should be able to start up fast. 
<p></p>So when I download web first electron-based products and they take multiple seconds to open.For example, Spotify before I can even start using the interface and it's even worse because a lot of desktop software is built to be online.First, and the most egregious examples of this are Gmail. 
<p></p>When I open it, it takes two or more seconds to even load the page.Meanwhile, Google likes to tout how fast their search results are. Spotify takes also about two seconds ships with an entire copy of the chrome browser, which is about 150 megabytes, and I can't even use Spotify anymore.
<p></p>If I don't have an internet connection, Now Figma is an interesting example because Figma is largely built on the canvas API with WebAssembly, which is good because it actually shows it's one of the fastest web applications I've used, but they're definitely a little bit shady because they don't even let you use their desktop software without logging into a Figma account.
<p></p>So, I make my living making designs. All of my designs are owned by Figma because they don't live on my computer.I should really do a separate article on local first software, but alas, but does it have to be this way?Do we have to rely on slow browsers?
<p></p>As the only way to get anything done and do we have to keep incurring this cost as users of these interfaces and putting up with the craft the jankiness.So to speak.Well, let's look first at what the web browser got, right?So it produces a pretty well sandboxed environment, which is something operating system should take more seriously and provide APIs for developers to do.
<p></p>So if you look at okay good cross-platform support so I know if I ship a website it will run on almost every device there might be minor differences but mostly it'll work.All right. Easy to get started. While I do kind of hate HTML and CSS and JavaScript.It is relatively easy for beginners to get started. 
<p></p>High quality font rendering. So this is a big plus getting font rendering to work decently well across all devices is tricky.There are libraries that do this like free type, but integrating them is not triple and finally OS.Level accessibility.Meaning the operating system actually knows how to read out these text elements on the page to screen readers.
<p></p>So, all those things are very solid foundation, but like I said, you pay a large cost for using the browser. There's so much complexity that goes into it.It's really hard to figure out what actually is the slow part of an application and not to mention.There's lots of shaky foundations, for how you have to build your interface.
<p></p>For example, the Dom CSS HTML and JavaScript
<p></p>But what it browsers, get wrong.Well, they're slow for one because of all of these dependencies they are primarily or retained mode UI. Which if you're building, a newspaper is a reasonable thing.But if you're building, for example, an application, where lots of things are going to be interactive, you're going to have dynamic animations.
<p></p>Actually you want your API to be an immediate mode UI linked to KC moratorium immediate mode UI here and overall they just weren't really designed to build these applications. So is wasn't the answer maybe but there are still some problems with was them.For example, you can only have one continuous chunk of memory and you cannot have virtual memory which is an extremely useful way of organizing memory on an operating system. 
<p></p>And once you've expanded memory, there's no way for you to tell wise them that you don't need it anymore.So the memory story on Wazeman is busted and you pay about a 4X, slow down, not to mention that, you can't do Sydney.So really more like 16x slowdown for a lot of stuff.
<p></p>But nevertheless, you pay about a forex slow down on all code that has to get interpreted because it's not actually running on the CPU anymore.Well, what can we do about this?
<p></p>Well, for one, we as developers can start by understanding folding, our problem before writing, any code, and being extremely careful about choosing what foundation we build on top of.For example, if we're building a cross platform desktop application, maybe SDL 2 is a better choice than electron as you're foundation.
<p></p>Now, there are some things that become a little bit more complicated, if you've just got frames to draw all the time, namely the UI framework. And so what I'm going to call here, a UI engine is basically a game engine. That's custom tailored to building user interfaces.So it would include some sort of immediate mode UI with some ability to draw fonts and images and text and be able to rotate stuff.
<p></p>Bonuses would be things like box, shadow, borders, rounded corners, which all of that you can do link to Ryan Flurries UI thing here.So increasingly, I've been being becoming convinced that UI engines as a foundation for building high quality cross platform.User interfaces is a very compelling story for a number of reasons as we've already talked about the web is kind of busted and the story on mobile development is kind of similar in a lot of ways.
<p></p>But worse, compared to web development.Lots of retain mode, stuff simple things become relatively difficult.And Hey look, I just want to draw some texts on the screen and move on with my life. So there are quote on quotes solutions, like react native or like flutter. And what's interesting about flutter is, I think the underlying tech is good relatively good, but the user interface, the API is awful. 
<p></p>They give you this terrible language like dart and it basically just looks like a retained mode mess, which is more or less. What Android development already looks like.So okay great.I can use the principles, I'm used to with Android and builds cross platform applications.But that's only for, that's only if I adopt this retained mode cost. 
<p></p>So we should really talk about retained mode versus immediate mode.And the mental gymnastics your brain has to go through to manage a retained mode interface in a game.It is trivial to just say, don't go down this path and now start going down this other path and that's how you build, for example, menus and interfaces like that, if I'm in the menu state, draw the menu, if I'm in the game state draw the game.
<p></p>Um but having to think about pushing and popping contexts is not really the way you want to be thinking about your application.So, for a lot of reasons, that's why I also sort of have said, you know, reacts brought a compelling, immediate modes style API to the web, which is I why? 
<p></p>I think it's been so popular. Now, the pitfalls with react are where you kind of. Can't forget that. There's a dom there anymore in cases.That should be trivial for today's computers, for example, rendering a virtual list of 10,000 elements gets extremely slow.So that's a medium mode versus retained mode.
<p></p>Maybe that even deserves another article on its own. Now popping back up a stack to UI engines.What would a UI engine have to do to be compelling? Well it would have to support modern operating systems.Meaning Windows, Mac, Linux and Android.And iOS, you would want one code base to be able to run on all of these. 
<p></p>Meaning, I shrink my window on Windows and that's exactly the same window.I would see on Android if it were the same size as that display, it would have to handle text rendering extremely well.So similar to browsers, but it could use something like, free type to get started.
<p></p>It would have to interface with all of the operating systems calls, for example, to get new memory, to read and write from the system clipboard, etc.It would also have to do accessibility pretty well, which is to say tell the operating system that there are these text widgets at certain positions that screen readers can read out. 
<p></p>But honestly, that's probably the last tuning detail to this whole system at its core.It means.</div>
<div class='content pad-64 w-800 sm:pad-32 flex-y center-x'>
<a class='pad-16' onclick='toggle()'>üí°</a>
<div style='min-width: 64px; max-width: 64px; margin-bottom: -64px'>
<img src='/r/guy_pixel.png' alt='Guy'  style='image-rendering:pixelated;'/>
</div>
</div>
<script>var invert = false;const up = (i) => {try { localStorage.setItem('invert', i ? 1 : 0); } catch(err) {}document.body.classList.toggle('invert', i);invert = i;};function toggle(){up(!invert);}if (window.matchMedia){try { i = localStorage.getItem('invert'); } catch(err) {}if (i === null) i = !window.matchMedia('(prefers-color-scheme: dark)').matches;else i = !!Number(i);up(i);window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {up(!e.matches, true);});}window.addEventListener('load', () => {document.getElementsByTagName('html')[0].className += 'load';});</script>
<script src='/lightning.js'></script>
</body>
</html>
